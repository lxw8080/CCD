# 🚀 客户资料收集系统 - 快速启动指南

## 📋 系统要求

- Python 3.8+
- Node.js 16+
- PostgreSQL 12+ (已配置为外部数据库)

---

## ⚡ 快速启动 (3 步)

### 步骤 1: 启动后端服务

打开 **PowerShell** 或 **CMD**，进入项目目录：

```powershell
cd c:\Users\16094\Desktop\项目\CCD\backend
venv\Scripts\activate
python manage.py runserver
```

**预期输出**:
```
Starting development server at http://127.0.0.1:8000/
```

### 步骤 2: 启动前端服务

打开 **新的 PowerShell** 窗口：

```powershell
cd c:\Users\16094\Desktop\项目\CCD\frontend
npm run dev
```

**预期输出**:
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://127.0.0.1:3000/
```

### 步骤 3: 访问应用

在浏览器中打开：
- **前端应用**: http://127.0.0.1:3000
- **管理后台**: http://127.0.0.1:8000/admin

---

## 🔐 登录凭证

### 管理员账户
```
用户名: admin
密码: admin123
```

### 其他账户
```
客服: service01
审核员: auditor01
```

---

## 📁 项目结构

```
CCD/
├── backend/              # Django 后端
│   ├── config/          # Django 配置
│   ├── apps/            # 应用模块
│   │   ├── users/       # 用户管理
│   │   ├── customers/   # 客户管理
│   │   └── documents/   # 资料管理
│   ├── .env             # 环境变量配置
│   └── manage.py        # Django 管理脚本
│
├── frontend/            # Vue 3 前端
│   ├── src/
│   │   ├── components/  # Vue 组件
│   │   ├── pages/       # 页面
│   │   ├── api/         # API 调用
│   │   └── store/       # Pinia 状态管理
│   ├── vite.config.js   # Vite 配置
│   └── package.json     # 依赖配置
│
└── deployment/          # 部署配置
```

---

## 🔧 配置说明

### 后端配置 (.env)

已自动创建，包含以下配置：

```env
# Django 设置
SECRET_KEY=django-insecure-ccd-project-secret-key-change-in-production
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# PostgreSQL 数据库
USE_SQLITE=False
DB_NAME=ccd_dev
DB_USER=flask_user
DB_PASSWORD=flask_password
DB_HOST=115.190.29.10
DB_PORT=5433

# API 配置
API_KEY=lxw8025031
```

### 前端配置 (vite.config.js)

已自动更新，包含：
- 端口: 3000
- 代理: `/api` 和 `/media` 代理到后端

---

## 🐛 常见问题

### Q1: 前端无法连接到后端
**A**: 检查后端是否运行在 http://127.0.0.1:8000，确保 vite.config.js 中的代理配置正确。

### Q2: 登录失败
**A**: 确保使用正确的凭证 (admin / admin123)，检查数据库是否已初始化。

### Q3: 数据库连接错误
**A**: 检查 PostgreSQL 服务是否运行，确保 .env 文件中的数据库配置正确。

### Q4: 端口已被占用
**A**: 
- 后端: 修改 `python manage.py runserver 8001`
- 前端: 修改 `vite.config.js` 中的 port 配置

---

## 📊 API 端点

### 认证
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/logout` - 用户登出

### 客户管理
- `GET /api/customers/` - 获取客户列表
- `POST /api/customers/` - 创建客户
- `GET /api/customers/{id}/` - 获取客户详情
- `PUT /api/customers/{id}/` - 更新客户
- `DELETE /api/customers/{id}/` - 删除客户

### 资料管理
- `GET /api/documents/` - 获取资料列表
- `POST /api/documents/` - 上传资料
- `DELETE /api/documents/{id}/` - 删除资料

---

## 🚀 生产部署

### 前置条件
1. 更新 `SECRET_KEY` 为强密钥
2. 设置 `DEBUG=False`
3. 配置 `ALLOWED_HOSTS`
4. 设置 HTTPS

### 部署命令
```bash
# 后端
cd backend
pip install -r requirements.txt
python manage.py migrate
python manage.py collectstatic --noinput
gunicorn config.wsgi:application --bind 0.0.0.0:8000

# 前端
cd frontend
npm install
npm run build
# 使用 Nginx 或其他 Web 服务器提供静态文件
```

---

## 📞 获取帮助

- 查看日志: `backend/logs/server.log`
- 浏览器控制台: F12 打开开发者工具
- 管理后台: http://127.0.0.1:8000/admin

---

**最后更新**: 2025-10-18  
**状态**: ✅ 系统已就绪

