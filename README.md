# å®¢æˆ·èµ„æ–™æ”¶é›†ç³»ç»Ÿ (CCD)

ä¸€ä¸ªç”¨äºä¿¡è´·å…¬å¸çš„å¤šç«¯ååŒå®¢æˆ·èµ„æ–™æ”¶é›†ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒPCå’Œç§»åŠ¨ç«¯åŒæ—¶æ“ä½œï¼Œå®ç°é«˜æ•ˆçš„èµ„æ–™æ”¶é›†ã€ç®¡ç†å’Œå®¡æ ¸æµç¨‹ã€‚

## é¡¹ç›®ç®€ä»‹

æœ¬ç³»ç»Ÿè§£å†³äº†ä¿¡è´·å…¬å¸åœ¨å®¢æˆ·èµ„æ–™æ”¶é›†è¿‡ç¨‹ä¸­çš„ç—›ç‚¹ï¼š
- âœ… å¤šç«¯ååŒï¼šæ”¯æŒæ‰‹æœºæ‹ç…§ã€ç”µè„‘æˆªå›¾ã€æ‰«æä»ªæ‰«æç­‰å¤šç§æ–¹å¼ä¸Šä¼ 
- âœ… å®æ—¶åŒæ­¥ï¼šå¤šä¸ªè®¾å¤‡å¯ä»¥åŒæ—¶ä¸ºåŒä¸€å®¢æˆ·è¡¥å……èµ„æ–™
- âœ… è‡ªåŠ¨æ£€æŸ¥ï¼šç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥èµ„æ–™å®Œæ•´æ€§ï¼Œæç¤ºç¼ºå¤±èµ„æ–™
- âœ… é™æœ¬å¢æ•ˆï¼šæ— éœ€äººå·¥å½’é›†æ•´ç†ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ†ç±»ç®¡ç†

## æŠ€æœ¯æ¶æ„

### åç«¯
- **æ¡†æ¶**: Django 4.2 + Django REST Framework
- **æ•°æ®åº“**: PostgreSQL
- **è®¤è¯**: JWT Token
- **æ–‡ä»¶å¤„ç†**: Pillow

### å‰ç«¯
- **æ¡†æ¶**: Vue 3 + Vite
- **PCç«¯UI**: Element Plus
- **ç§»åŠ¨ç«¯UI**: Vant
- **çŠ¶æ€ç®¡ç†**: Pinia
- **HTTPå®¢æˆ·ç«¯**: Axios
- **å›¾ç‰‡å¤„ç†**: Compressor.js

### éƒ¨ç½²
- **WebæœåŠ¡å™¨**: Nginx
- **åº”ç”¨æœåŠ¡å™¨**: Gunicorn
- **å¹³å°**: äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘ï¼‰

## æ ¸å¿ƒåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯
- JWT tokenè®¤è¯æœºåˆ¶
- è§’è‰²æƒé™ç®¡ç†ï¼ˆç®¡ç†å‘˜ã€å®¢æœäººå‘˜ã€å®¡æ ¸äººå‘˜ï¼‰
- ç™»å½•/ç™»å‡ºåŠŸèƒ½

### 2. å®¢æˆ·ç®¡ç†
- åˆ›å»ºå®¢æˆ·æ¡£æ¡ˆ
- å®¢æˆ·ä¿¡æ¯ç»´æŠ¤
- å®¢æˆ·åˆ—è¡¨æŸ¥è¯¢ï¼ˆæ”¯æŒæœç´¢ã€ç­›é€‰ï¼‰
- å®¢æˆ·çŠ¶æ€è·Ÿè¸ª

### 3. èµ„æ–™ä¸Šä¼ 
- å¤šå›¾ç‰‡æ‰¹é‡ä¸Šä¼ 
- æ”¯æŒæ‹–æ‹½ä¸Šä¼ ï¼ˆPCç«¯ï¼‰
- æ”¯æŒæ‹ç…§ä¸Šä¼ ï¼ˆç§»åŠ¨ç«¯ï¼‰
- è‡ªåŠ¨å›¾ç‰‡å‹ç¼©
- èµ„æ–™ç±»å‹åˆ†ç±»ç®¡ç†

### 4. èµ„æ–™å®Œæ•´æ€§æ£€æŸ¥
- é¢„è®¾å¿…è¦èµ„æ–™æ¸…å•
- è‡ªåŠ¨æ£€æŸ¥èµ„æ–™æ˜¯å¦é½å…¨
- ç¼ºå¤±èµ„æ–™å®æ—¶æé†’
- å®Œæ•´åº¦å¯è§†åŒ–å±•ç¤º

### 5. å“åº”å¼è®¾è®¡
- PCç«¯ï¼šè¡¨æ ¼åˆ—è¡¨ + è¯¦æƒ…é¡µé¢
- ç§»åŠ¨ç«¯ï¼šå¡ç‰‡åˆ—è¡¨ + ä¼˜åŒ–çš„æ“ä½œç•Œé¢
- è‡ªåŠ¨é€‚é…ä¸åŒè®¾å¤‡

## ğŸ“š æ–‡æ¡£å¯¼èˆª

> ğŸ’¡ **ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹ï¼Ÿ** æŸ¥çœ‹ **[é¡¹ç›®å¯¼èˆª](é¡¹ç›®å¯¼èˆª.md)** å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€æ–‡æ¡£ï¼

### å¿«é€Ÿé“¾æ¥
- **[é¡¹ç›®å¯¼èˆª](é¡¹ç›®å¯¼èˆª.md)** - ğŸ“– å®Œæ•´æ–‡æ¡£å¯¼èˆªå’Œåœºæ™¯æŒ‡å¼• â­
- **[å¿«é€Ÿå¼€å§‹æŒ‡å—](QUICK_START.md)** - å¿«é€Ÿæ­å»ºå¼€å‘ç¯å¢ƒ
- **[å®Œæ•´ç”¨æˆ·æ‰‹å†Œ](docs/guides/USER_GUIDE.md)** - ç³»ç»Ÿä½¿ç”¨æŒ‡å—
- **[æ— HMRæ¨¡å¼è¯´æ˜](æ— HMRæ¨¡å¼å¯åŠ¨æˆåŠŸè¯´æ˜.md)** - ç”Ÿäº§æ„å»ºæ¨¡å¼ä½¿ç”¨è¯´æ˜
- **[æ–‡æ¡£ä¸­å¿ƒ](docs/README.md)** - æ‰€æœ‰æ–‡æ¡£çš„å¯¼èˆª
- **[æ›´æ–°æ—¥å¿—](CHANGELOG.md)** - ç‰ˆæœ¬å†å²
- **[é¡¹ç›®ç»“æ„](PROJECT_STRUCTURE.md)** - ä»£ç ç»“æ„è¯´æ˜

### æŒ‰è§’è‰²æŸ¥æ‰¾
- **ç”¨æˆ·**: [ç”¨æˆ·ä½¿ç”¨æŒ‡å—](docs/guides/USER_GUIDE.md)
- **å¼€å‘è€…**: [åç«¯æ–‡æ¡£](backend/README.md) | [å‰ç«¯æ–‡æ¡£](frontend/README.md)
- **è¿ç»´**: [éƒ¨ç½²æ–‡æ¡£](deployment/README.md)

### æŒ‰åœºæ™¯æŸ¥æ‰¾
- **é¦–æ¬¡å¯åŠ¨**: [QUICK_START.md](QUICK_START.md) â†’ è¿è¡Œ `bash start-dev.sh`
- **æ—¥å¸¸å¼€å‘**: è¿è¡Œ `bash start-dev.sh` ï¼ˆæ”¯æŒçƒ­æ›´æ–°ï¼‰
- **æµ‹è¯•æ¼”ç¤º**: è¿è¡Œ `bash start-no-hmr.sh` ï¼ˆç”Ÿäº§æ„å»ºï¼Œæ›´ç¨³å®šï¼‰
- **ç”Ÿäº§éƒ¨ç½²**: [deployment/README.md](deployment/README.md)

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Node.js 16+
- PostgreSQL 12+

### åç«¯è®¾ç½®

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
copy .env.example .env  # ç¼–è¾‘.envæ–‡ä»¶é…ç½®æ•°æ®åº“

# åˆ›å»ºæ•°æ®åº“ï¼ˆåœ¨PostgreSQLä¸­ï¼‰
# CREATE DATABASE ccd_db;

# è¿è¡Œæ•°æ®åº“è¿ç§»
python manage.py makemigrations
python manage.py migrate

# åˆå§‹åŒ–èµ„æ–™ç±»å‹æ•°æ®
python manage.py init_document_types

# åˆ›å»ºè¶…çº§ç®¡ç†å‘˜
python manage.py createsuperuser

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
python manage.py runserver
```

åç«¯æœåŠ¡å°†åœ¨ http://127.0.0.1:8000 å¯åŠ¨ã€‚

### å‰ç«¯è®¾ç½®

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ http://localhost:5173 å¯åŠ¨ã€‚

### è®¿é—®ç³»ç»Ÿ

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
2. ä½¿ç”¨åˆ›å»ºçš„è¶…çº§ç®¡ç†å‘˜è´¦å·ç™»å½•
3. å¼€å§‹ä½¿ç”¨ç³»ç»Ÿ

## é¡¹ç›®ç»“æ„

```
CCD/
â”œâ”€â”€ backend/                 # Djangoåç«¯
â”‚   â”œâ”€â”€ apps/
â”‚   â”‚   â”œâ”€â”€ users/          # ç”¨æˆ·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ customers/      # å®¢æˆ·æ¨¡å—
â”‚   â”‚   â””â”€â”€ documents/      # èµ„æ–™æ¨¡å—
â”‚   â”œâ”€â”€ config/             # é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ media/              # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨
â”‚   â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â”‚   â””â”€â”€ manage.py
â”‚
â”œâ”€â”€ frontend/               # Vueå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ components/    # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/        # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ store/         # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ views/         # é¡µé¢
â”‚   â”‚       â”œâ”€â”€ pc/        # PCç«¯é¡µé¢
â”‚   â”‚       â””â”€â”€ mobile/    # ç§»åŠ¨ç«¯é¡µé¢
â”‚   â”œâ”€â”€ package.json       # Nodeä¾èµ–
â”‚   â””â”€â”€ vite.config.js     # Viteé…ç½®
â”‚
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## APIæ¥å£æ–‡æ¡£

### è®¤è¯æ¥å£
- `POST /api/auth/login/` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout/` - ç”¨æˆ·ç™»å‡º
- `GET /api/auth/me/` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### å®¢æˆ·æ¥å£
- `GET /api/customers/` - å®¢æˆ·åˆ—è¡¨
- `POST /api/customers/` - åˆ›å»ºå®¢æˆ·
- `GET /api/customers/{id}/` - å®¢æˆ·è¯¦æƒ…
- `PUT /api/customers/{id}/` - æ›´æ–°å®¢æˆ·
- `DELETE /api/customers/{id}/` - åˆ é™¤å®¢æˆ·
- `GET /api/customers/{id}/completeness/` - èµ„æ–™å®Œæ•´æ€§æ£€æŸ¥

### èµ„æ–™æ¥å£
- `GET /api/documents/types/` - èµ„æ–™ç±»å‹åˆ—è¡¨
- `GET /api/documents/` - èµ„æ–™åˆ—è¡¨
- `POST /api/documents/upload/` - ä¸Šä¼ èµ„æ–™
- `POST /api/documents/batch-upload/` - æ‰¹é‡ä¸Šä¼ 
- `DELETE /api/documents/{id}/` - åˆ é™¤èµ„æ–™

## æ•°æ®åº“è®¾è®¡

### Userï¼ˆç”¨æˆ·è¡¨ï¼‰
- åŸºäºDjango AbstractUser
- æ‰©å±•å­—æ®µï¼šroleï¼ˆè§’è‰²ï¼‰ã€phoneï¼ˆæ‰‹æœºå·ï¼‰

### Customerï¼ˆå®¢æˆ·è¡¨ï¼‰
- åŸºæœ¬ä¿¡æ¯ï¼šå§“åã€èº«ä»½è¯å·ã€æ‰‹æœºå·ã€åœ°å€
- çŠ¶æ€å­—æ®µï¼špending/complete/reviewing/approved/rejected
- å…³è”å­—æ®µï¼šcreated_byï¼ˆåˆ›å»ºäººï¼‰

### DocumentTypeï¼ˆèµ„æ–™ç±»å‹è¡¨ï¼‰
- èµ„æ–™ç±»å‹åç§°
- æ˜¯å¦å¿…éœ€æ ‡è¯†
- æ’åºé¡ºåº

### Documentï¼ˆèµ„æ–™è¡¨ï¼‰
- å…³è”å®¢æˆ·å’Œèµ„æ–™ç±»å‹
- æ–‡ä»¶å­˜å‚¨è·¯å¾„
- ä¸Šä¼ äººå’Œä¸Šä¼ æ—¶é—´
- å®¡æ ¸çŠ¶æ€

## ç”Ÿäº§éƒ¨ç½²

### Nginxé…ç½®ç¤ºä¾‹

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /path/to/frontend/dist;
        try_files $uri $uri/ /index.html;
    }
    
    # åç«¯API
    location /api {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # åª’ä½“æ–‡ä»¶
    location /media {
        alias /path/to/backend/media;
    }
    
    # é™æ€æ–‡ä»¶
    location /static {
        alias /path/to/backend/staticfiles;
    }
}
```

### ä½¿ç”¨Gunicornè¿è¡Œåç«¯

```bash
gunicorn config.wsgi:application --bind 0.0.0.0:8000 --workers 4
```

## å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿PostgreSQLæœåŠ¡å·²å¯åŠ¨ã€‚

### 2. å‰ç«¯æ— æ³•è®¿é—®åç«¯API
æ£€æŸ¥Viteé…ç½®ä¸­çš„ä»£ç†è®¾ç½®ï¼Œç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œã€‚

### 3. å›¾ç‰‡ä¸Šä¼ å¤±è´¥
æ£€æŸ¥åç«¯ `media` ç›®å½•çš„å†™å…¥æƒé™ï¼Œç¡®ä¿æ–‡ä»¶å¤§å°ä¸è¶…è¿‡é™åˆ¶ï¼ˆ10MBï¼‰ã€‚

### 4. ç§»åŠ¨ç«¯æ— æ³•æ‹ç…§
ç¡®ä¿ä½¿ç”¨HTTPSåè®®æˆ–localhostï¼Œç°ä»£æµè§ˆå™¨è¦æ±‚å®‰å…¨ä¸Šä¸‹æ–‡æ‰èƒ½è®¿é—®æ‘„åƒå¤´ã€‚

## åç»­ä¼˜åŒ–å»ºè®®

- [ ] æ¥å…¥é˜¿é‡Œäº‘OSSå­˜å‚¨å›¾ç‰‡
- [ ] æ·»åŠ OCRè¯†åˆ«åŠŸèƒ½è‡ªåŠ¨æå–è¯ä»¶ä¿¡æ¯
- [ ] å®ç°å·¥ä½œæµå®¡æ‰¹åŠŸèƒ½
- [ ] æ·»åŠ æ¶ˆæ¯é€šçŸ¥ï¼ˆé‚®ä»¶/çŸ­ä¿¡ï¼‰
- [ ] å®ç°ç»Ÿè®¡æŠ¥è¡¨åŠŸèƒ½
- [ ] æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] æ”¯æŒDockerä¸€é”®éƒ¨ç½²

## å¼€å‘å›¢é˜Ÿ

æœ¬é¡¹ç›®ç”¨äºä¿¡è´·å…¬å¸é™æœ¬å¢æ•ˆï¼Œæå‡å®¢æˆ·èµ„æ–™æ”¶é›†çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œå†…éƒ¨ä½¿ç”¨ã€‚

